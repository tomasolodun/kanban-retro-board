{"ast":null,"code":"import { moveItemInArray, transferArrayItem } from '@angular/cdk/drag-drop';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/shared/services/board.service\";\nimport * as i2 from \"../../shared/services/auth.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"../header/header.component\";\nimport * as i5 from \"@angular/cdk/drag-drop\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@angular/material/button\";\nimport * as i8 from \"@angular/material/icon\";\nimport * as i9 from \"../dialog/dialog/dialog.component\";\nimport * as i10 from \"../color-panel/color-panel.component\";\nimport * as i11 from \"../board-item/board-item.component\";\nimport * as i12 from \"../comment-item/comment-item.component\";\n\nfunction BoardComponent_div_3_div_12_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelementStart(1, \"app-comment-item\", 16);\n    i0.ɵɵlistener(\"emitComment\", function BoardComponent_div_3_div_12_div_2_Template_app_comment_item_emitComment_1_listener($event) {\n      i0.ɵɵrestoreView(_r8);\n      const item_r3 = i0.ɵɵnextContext().$implicit;\n      const column_r1 = i0.ɵɵnextContext().$implicit;\n      const ctx_r6 = i0.ɵɵnextContext();\n      return ctx_r6.onDeleteComment($event, column_r1.id, item_r3);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const comment_r5 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"comment\", comment_r5);\n  }\n}\n\nconst _c0 = function (a0) {\n  return {\n    background: a0\n  };\n};\n\nfunction BoardComponent_div_3_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 13);\n    i0.ɵɵelementStart(1, \"app-board-item\", 14);\n    i0.ɵɵlistener(\"emitText\", function BoardComponent_div_3_div_12_Template_app_board_item_emitText_1_listener($event) {\n      i0.ɵɵrestoreView(_r12);\n      const column_r1 = i0.ɵɵnextContext().$implicit;\n      const ctx_r10 = i0.ɵɵnextContext();\n      return ctx_r10.onAddComment($event, column_r1.id);\n    })(\"emitCardItem\", function BoardComponent_div_3_div_12_Template_app_board_item_emitCardItem_1_listener($event) {\n      i0.ɵɵrestoreView(_r12);\n      const column_r1 = i0.ɵɵnextContext().$implicit;\n      const ctx_r13 = i0.ɵɵnextContext();\n      return ctx_r13.onChangeLike($event, column_r1.id);\n    })(\"emitDeleteCard\", function BoardComponent_div_3_div_12_Template_app_board_item_emitDeleteCard_1_listener($event) {\n      i0.ɵɵrestoreView(_r12);\n      const column_r1 = i0.ɵɵnextContext().$implicit;\n      const ctx_r15 = i0.ɵɵnextContext();\n      return ctx_r15.onDeleteCard($event, column_r1.id);\n    });\n    i0.ɵɵtemplate(2, BoardComponent_div_3_div_12_div_2_Template, 2, 1, \"div\", 15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r3 = ctx.$implicit;\n    const column_r1 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction1(3, _c0, column_r1.color));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"item\", item_r3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", item_r3.comments);\n  }\n}\n\nfunction BoardComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r19 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 3);\n    i0.ɵɵelementStart(1, \"div\", 4);\n    i0.ɵɵelementStart(2, \"h2\", 5);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"button\", 6);\n    i0.ɵɵlistener(\"click\", function BoardComponent_div_3_Template_button_click_4_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r19);\n      const column_r1 = restoredCtx.$implicit;\n      const ctx_r18 = i0.ɵɵnextContext();\n      return ctx_r18.onDeleteColumn(column_r1.id);\n    });\n    i0.ɵɵelementStart(5, \"mat-icon\", 7);\n    i0.ɵɵtext(6, \"delete\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"app-dialog\", 8);\n    i0.ɵɵlistener(\"emitText\", function BoardComponent_div_3_Template_app_dialog_emitText_7_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r19);\n      const column_r1 = restoredCtx.$implicit;\n      const ctx_r20 = i0.ɵɵnextContext();\n      return ctx_r20.onAddCard($event, column_r1.id);\n    });\n    i0.ɵɵelementStart(8, \"button\", 9);\n    i0.ɵɵtext(9, \"+\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"app-color-panel\", 10);\n    i0.ɵɵlistener(\"emitColor\", function BoardComponent_div_3_Template_app_color_panel_emitColor_10_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r19);\n      const column_r1 = restoredCtx.$implicit;\n      const ctx_r21 = i0.ɵɵnextContext();\n      return ctx_r21.onColorChange($event, column_r1.id);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"div\", 11);\n    i0.ɵɵlistener(\"cdkDropListDropped\", function BoardComponent_div_3_Template_div_cdkDropListDropped_11_listener($event) {\n      i0.ɵɵrestoreView(_r19);\n      const ctx_r22 = i0.ɵɵnextContext();\n      return ctx_r22.drop($event);\n    });\n    i0.ɵɵtemplate(12, BoardComponent_div_3_div_12_Template, 3, 5, \"div\", 12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const column_r1 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(column_r1.title);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"question\", \"Add new card in \" + column_r1.title + \" column\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"cdkDropListData\", column_r1.list);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", column_r1.list);\n  }\n}\n\nexport let BoardComponent = /*#__PURE__*/(() => {\n  class BoardComponent {\n    constructor(boardService, authService, router, ngZone) {\n      this.boardService = boardService;\n      this.authService = authService;\n      this.router = router;\n      this.ngZone = ngZone;\n    }\n\n    ngOnInit() {\n      console.log('BOARD - INIT');\n    }\n\n    onColorChange(color, columnId) {\n      this.boardService.changeColumnColor(color, columnId);\n    }\n\n    onAddCard(text, columnId) {\n      if (text) {\n        this.boardService.addCard(text, columnId);\n      }\n    }\n\n    onDeleteColumn(columnId) {\n      this.boardService.deleteColumn(columnId);\n    }\n\n    onDeleteCard(cardId, columnId) {\n      this.boardService.deleteCard(cardId, columnId);\n    }\n\n    onChangeLike(event, columnId) {\n      const {\n        card: {\n          id\n        },\n        increase\n      } = event;\n      this.boardService.changeLike(id, columnId, increase);\n    }\n\n    onAddComment(event, columnId) {\n      this.boardService.addComment(columnId, event.id, event.text);\n    }\n\n    onDeleteComment(comment, columnId, item) {\n      this.boardService.deleteComment(columnId, item.id, comment.id);\n    }\n\n    drop(event) {\n      if (event.previousContainer === event.container) {\n        moveItemInArray(event.container.data, event.previousIndex, event.currentIndex);\n      } else {\n        transferArrayItem(event.previousContainer.data, event.container.data, event.previousIndex, event.currentIndex);\n      }\n    }\n\n  }\n\n  BoardComponent.ɵfac = function BoardComponent_Factory(t) {\n    return new (t || BoardComponent)(i0.ɵɵdirectiveInject(i1.BoardService), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i0.NgZone));\n  };\n\n  BoardComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: BoardComponent,\n    selectors: [[\"app-board\"]],\n    decls: 5,\n    vars: 3,\n    consts: [[1, \"container-fluid\"], [\"cdkDropListGroup\", \"\", 1, \"row\"], [\"class\", \"col-sm-6 col-lg-3 mb-3\", 4, \"ngFor\", \"ngForOf\"], [1, \"col-sm-6\", \"col-lg-3\", \"mb-3\"], [1, \"d-flex\", \"justify-content-between\", \"align-items-center\", \"p-2\", \"shadow-sm\", \"column-header\"], [1, \"m-0\"], [\"mat-icon-button\", \"\", 1, \"icon-delete\", 3, \"click\"], [2, \"font-size\", \"20px\"], [3, \"question\", \"emitText\"], [\"mat-raised-button\", \"\", 1, \"w-100\", \"mb-1\", \"btn-add\"], [3, \"emitColor\"], [\"cdkDropList\", \"\", 1, \"example-list\", 3, \"cdkDropListData\", \"cdkDropListDropped\"], [\"cdkDrag\", \"\", \"class\", \"example-box\", 3, \"ngStyle\", 4, \"ngFor\", \"ngForOf\"], [\"cdkDrag\", \"\", 1, \"example-box\", 3, \"ngStyle\"], [3, \"item\", \"emitText\", \"emitCardItem\", \"emitDeleteCard\"], [4, \"ngFor\", \"ngForOf\"], [3, \"comment\", \"emitComment\"]],\n    template: function BoardComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelement(0, \"app-header\");\n        i0.ɵɵelementStart(1, \"div\", 0);\n        i0.ɵɵelementStart(2, \"div\", 1);\n        i0.ɵɵtemplate(3, BoardComponent_div_3_Template, 13, 4, \"div\", 2);\n        i0.ɵɵpipe(4, \"async\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(4, 1, ctx.boardService.getBoard$()));\n      }\n    },\n    directives: [i4.HeaderComponent, i5.CdkDropListGroup, i6.NgForOf, i7.MatButton, i8.MatIcon, i9.DialogComponent, i10.ColorPanelComponent, i5.CdkDropList, i5.CdkDrag, i6.NgStyle, i11.BoardItemComponent, i12.CommentItemComponent],\n    pipes: [i6.AsyncPipe],\n    styles: [\".example-list[_ngcontent-%COMP%]{min-height:60px;border-radius:4px;overflow:hidden;display:block;height:100%}.example-box[_ngcontent-%COMP%]{padding:10px 10px 5px;border:solid 1px #ccc;color:#ecececde;border-radius:2px;cursor:move;font-size:14px}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.example-box[_ngcontent-%COMP%]:last-child{border:none}.example-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .example-box[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.btn-add[_ngcontent-%COMP%]{background-color:#cecece}.column-header[_ngcontent-%COMP%]{border:1px solid #cfcfcf}\"]\n  });\n  return BoardComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}